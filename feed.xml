<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>Lance Jian</title>
 <link href="http://www.lancejian.com/feed.xml" rel="self"/>
 <link href="http://www.lancejian.com"/>
 <updated>2012-03-18T21:37:21-07:00</updated>
 <id>http://www.lancejian.com</id>
 <author>
   <name>Lance Jian</name>
 </author>

 
 <entry>
   <title>Install node.js in Ubuntu 10.04</title>
   <link href="http://www.lancejian.com/2012/03/12/install-nodejs-in-ubuntu-1004.html"/>
   <updated>2012-03-12T00:00:00-07:00</updated>
   <id>http://www.lancejian.com/2012/03/12/install-nodejs-in-ubuntu-1004</id>
   <content type="html">&lt;p&gt;Ubuntu 10.04 does not have a default node.js package. So if you want to use it, you need to install it manually:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo aptitude install git-core curl build-essential openssl libssl-dev
git clone https://github.com/joyent/node.git &amp;amp;&amp;amp; cd node &amp;amp;&amp;amp; git checkout v0.6.11
./configure
make
sudo make install
node -v
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&quot;v0.6.11&quot; is the current release version of node.js. If you are not sure, run &lt;code&gt;git tag&lt;/code&gt; to check which versions are available.&lt;/p&gt;

&lt;p&gt;Up to this point, you are able to use the &lt;code&gt;node&lt;/code&gt; command. You can then install &lt;code&gt;npm&lt;/code&gt; which is a package manager of node.js its own:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;curl http://npmjs.org/install.sh | sudo sh 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;After that, it's easy to install other node.js libraries. For example, to install &lt;code&gt;uglifyjs&lt;/code&gt;, simply run:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo npm install uglify-js -g 
&lt;/code&gt;&lt;/pre&gt;
</content>
 </entry>
 
 <entry>
   <title>Change PDF File Initial View</title>
   <link href="http://www.lancejian.com/2012/03/10/change-pdf-file-initial-view.html"/>
   <updated>2012-03-10T00:00:00-08:00</updated>
   <id>http://www.lancejian.com/2012/03/10/change-pdf-file-initial-view</id>
   <content type="html">&lt;p&gt;When you open PDF files using Adobe Reader, it will read initial view settings such as single page or double page stored in the PDF file. It's actually pretty easy to change this information in Linux:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Install pdfedit: &lt;code&gt;sudo apt-get install pdfedit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Open the PDF file in pdfedit, right click the &quot;catalog&quot; node in the tree panel, choose &quot;add item to dictionary&quot;&lt;/li&gt;
&lt;li&gt;Add property name: &quot;PageLayout&quot;&lt;/li&gt;
&lt;li&gt;Select &quot;name&quot; and input &quot;TwoPageRight&quot;&lt;/li&gt;
&lt;li&gt;Click &quot;add and close&quot;&lt;/li&gt;
&lt;li&gt;Save the PDF file&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This adds a name in the catalog dictionary of PDF file. It will be used by the Acrobat Reader. There are other possibilities:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;SinglePage&lt;/li&gt;
&lt;li&gt;OneColumn&lt;/li&gt;
&lt;li&gt;TwoColumnLeft&lt;/li&gt;
&lt;li&gt;TwoColumnRight&lt;/li&gt;
&lt;li&gt;TwoPageLeft&lt;/li&gt;
&lt;li&gt;TwoPageRight&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Column&quot; means continuous page. &quot;Page&quot; means display as a single page. &quot;Left&quot; means start double pages  with odd-numbered pages on the left.&lt;/p&gt;

&lt;p&gt;Please note that not all PDF viewers support this setting.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Convert Mercurial Repository into Git</title>
   <link href="http://www.lancejian.com/2012/02/05/convert-mercurial-repository-into-git.html"/>
   <updated>2012-02-05T23:46:00Z</updated>
   <id>http://www.lancejian.com/2012/02/05/convert-mercurial-repository-into-git</id>
   <content type="html">&lt;p&gt;I have some old mercurial repositories, and recently I want to convert them into
git repositories. It turns out that converting them is pretty easy. First, you
need to get &lt;a href=&quot;http://repo.or.cz/w/fast-export.git&quot;&gt;hg-fast-export&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;git clone git://repo.or.cz/fast-export.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, create a new git repository:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mkdir new_git_repo
cd new_git_repo
git init
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Finally, use the &lt;code&gt;hg-fast-export.sh&lt;/code&gt; script from the directory you just checked
out in the first step:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/path/to/hg-fast-export.sh -r /path/to/hg_repo
git-repack -a -d -f
git checkout BRANCH_NAME
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;BRANCH_NAME&lt;/code&gt; is the name of mercurial branch, the &quot;default&quot; branch in mercurial
will be called &quot;master&quot;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;hg-fast-export.sh&lt;/code&gt; supports &lt;code&gt;--force&lt;/code&gt; parameter, you can use it if you get
validation errors.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Change Default Editor for visudo in Ubuntu</title>
   <link href="http://www.lancejian.com/2012/02/03/change-default-editor-for-visudo-in-ubuntu.html"/>
   <updated>2012-02-03T00:00:00-08:00</updated>
   <id>http://www.lancejian.com/2012/02/03/change-default-editor-for-visudo-in-ubuntu</id>
   <content type="html">&lt;p&gt;Ubuntu and Debian use the alternatives system to maintain the symbolic links for programs. When you first run &lt;code&gt;visudo&lt;/code&gt;, it will prompt a list of editors for you to choose from. Unfortunately, it doesn't tell you how to change that setting again. The mostly happend situation is: you set it to &quot;nano&quot; at first, and can't change it to &quot;vi&quot; at a later time.&lt;/p&gt;

&lt;p&gt;Here is the command to bring up that list again:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo update-alternatives --config editor
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Some people suggest using command &lt;code&gt;EDITOR=vi visudo&lt;/code&gt;, or &lt;code&gt;export EDITOR=vi; visudo&lt;/code&gt;, but it's really annoying if you have to remember and type so many letters everytime you run this command.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Configure Cygwin Environment</title>
   <link href="http://www.lancejian.com/2012/02/01/configure-cygwin-environment.html"/>
   <updated>2012-02-01T00:00:00-08:00</updated>
   <id>http://www.lancejian.com/2012/02/01/configure-cygwin-environment</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://www.cygwin.com&quot;&gt;Cygwin&lt;/a&gt; is a windows program that simulates a Linux environment. The default installation uses &lt;code&gt;cmd.exe&lt;/code&gt; as the terminal program which is not very convenient. For example,  it can only be resized up to 80 characters in width. Fortunately, there is an &lt;code&gt;rxvt&lt;/code&gt; package in the Cygwin distribution. You only need to tweak some options to make it look like the terminal in Unix system.&lt;/p&gt;

&lt;p&gt;Right click &quot;Start &gt; Cygwin &gt; rxvt-native&quot; menu item, and select &quot;Properties...&quot;, edit the &quot;Target&quot; field to:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;C:\path-to-cygwin\bin\rxvt.exe -display :0 -geometry 80x43 +sb -bg black -fg gray -fn &quot;DejaVu Sans Mono-16&quot; -tn rxvt-cygwin-native -e /bin/bash --login
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can change &quot;&lt;a href=&quot;http://dejavu-fonts.org&quot;&gt;DejaVu Sans Mono&lt;/a&gt;&quot; font to the font name you prefer.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Can't Draw in Inkscape 0.48</title>
   <link href="http://www.lancejian.com/2012/01/29/cant-draw-with-mouse-in-inkscape.html"/>
   <updated>2012-01-29T00:00:00-08:00</updated>
   <id>http://www.lancejian.com/2012/01/29/cant-draw-with-mouse-in-inkscape</id>
   <content type="html">&lt;p&gt;Sometimes big problems come from small mistakes. One day I found I can't draw
anything in &lt;a href=&quot;http://inkscape.org&quot;&gt;Inkscape&lt;/a&gt;(version 0.48) with my mouse(I'm
using it under Mac OS).&lt;/p&gt;

&lt;p&gt;To solve this problem, I reinstalled Inkscape several times, even re-compiled
it from source code, but nothing happened. Finally I recalled that I had
connected a graphics tablet to the machine several days ago. So I checked the
device settings. It turned out that I didn't set it correctly: In &lt;code&gt;File-&amp;gt;input
devices-&amp;gt;Configuration&lt;/code&gt;, I have &lt;code&gt;pen&lt;/code&gt;, &lt;code&gt;cursor&lt;/code&gt; and &lt;code&gt;eraser&lt;/code&gt; selected. Once I
unchecked those three options, everything went fine.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>My Font for Gmail</title>
   <link href="http://www.lancejian.com/2011/08/26/my-font-for-gmail.html"/>
   <updated>2011-08-26T22:19:00Z</updated>
   <id>http://www.lancejian.com/2011/08/26/my-font-for-gmail</id>
   <content type="html">&lt;p&gt;I have lots of plain text emails in Gmail. The format of those emails is always a problem: code and other nicely formated text are not aligned well because Gmail uses &quot;arial,sans-serif&quot; as the default font. I couldn't find a good solution to change it to a &lt;a href=&quot;http://en.wikipedia.org/wiki/Monospaced_font&quot;&gt;monospaced&lt;/a&gt; one, so I decided to write my own Google Chrome extension: &lt;a href=&quot;https://chrome.google.com/webstore/detail/olhcogoioikcdeceiakjbandbaifohik&quot;&gt;My Font for Gmail&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This extension changes the default font of Gmail to any font you like. To use it:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Click the &quot;wrench&quot; icon on upper-right corner of Chrome,&lt;/li&gt;
&lt;li&gt;Select tools-&gt;Extensions-&gt;My Font for Gmailâ„¢-&gt;options.&lt;/li&gt;
&lt;li&gt;Choose a pre-defined font from the drop-down menu or enter any font in your system.&lt;/li&gt;
&lt;li&gt;Click &quot;Save&quot;.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Refresh&lt;/em&gt; the Gmail page or re-open it.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Please note that this extension works best for plain-text emails. Rich-text(HTML) emails will possibly remain its original font because those emails can set their own font for each element. Usually this doesn't bother me since they are already well-formatted.&lt;/p&gt;

&lt;p&gt;Source code is published at &lt;a href=&quot;https://github.com/lancelotj/myfont4gmail&quot;&gt;my git repository&lt;/a&gt; under MIT license.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Install Faenza in Ubuntu</title>
   <link href="http://www.lancejian.com/2011/04/19/install-faenza-in-ubuntu.html"/>
   <updated>2011-04-19T04:00:00Z</updated>
   <id>http://www.lancejian.com/2011/04/19/install-faenza-in-ubuntu</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://fav.me/d2v6x24&quot;&gt;Faenza Icons&lt;/a&gt; is a very beautiful Gnome icon theme provided by Tiheum.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://th04.deviantart.net/fs70/150/i/2011/320/6/e/faenza_icons_by_tiheum-d2v6x24.png&quot; alt=&quot;Faenza Icons&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It's very easy to install this theme in Ubuntu. Just run the following commands:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo add-apt-repository ppa:tiheum/equinox
sudo aptitude update
sudo aptitude install faenza-icon-theme
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, go to System-&gt;Appearance-&gt;Customize...-&gt;Icons, choose &quot;Faenza&quot;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Get Absolute Path of the Running Bash Script</title>
   <link href="http://www.lancejian.com/2011/04/13/get-absolute-path-of-the-running-bash-script.html"/>
   <updated>2011-04-13T04:00:00Z</updated>
   <id>http://www.lancejian.com/2011/04/13/get-absolute-path-of-the-running-bash-script</id>
   <content type="html">&lt;p&gt;Sometimes you want to run a bash script from any directory, especially when this
script is placed or linked in a common &lt;code&gt;$PATH&lt;/code&gt; directory. So the script should
know where itself is running so it can get the path of other files in the same
folder.&lt;/p&gt;

&lt;p&gt;First, get the relative directory. There are two situations:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;If the script is supposed to be executed directly like &lt;code&gt;./script.sh&lt;/code&gt;, get
it with this code:&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;relative_path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;dirname &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;


&lt;ol&gt;
&lt;li&gt;&lt;p&gt;If the script is supposed to be &quot;sourced&quot; like &lt;code&gt;source script.sh&lt;/code&gt;, get it
with this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;relative_path=`dirname $BASH_SOURCE`
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Once you have the relative path, it's easy to get the absolute path:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;absolute_path=`cd $relative_path;pwd`
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This method is compatible with both Linux and Mac OS. However, it's not perfect.
It won't work if you have changed the &lt;code&gt;cd&lt;/code&gt; command to something else using alias
or function. Although not usually happen, in this case, you can use the
following way:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;absolute_path=`readlink -m $relative_path`
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This command only works in Linux, so you have to pick the way suits you
best. Now &lt;code&gt;$absolute_path&lt;/code&gt; is the absolute path of the file being executed. You
can then use this variable to get other files which will be correct no matter
the current working directory is.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Clone a Ubuntu Virtual Machine Image</title>
   <link href="http://www.lancejian.com/2011/04/09/clone-a-ubuntu-virtual-machine-image.html"/>
   <updated>2011-04-09T02:48:00Z</updated>
   <id>http://www.lancejian.com/2011/04/09/clone-a-ubuntu-virtual-machine-image</id>
   <content type="html">&lt;p&gt;I recently created a Ubuntu server virtual machine image and wanted to clone it so that I don't need to install everything from scratch again. It turned out this is fairly easy.&lt;/p&gt;

&lt;p&gt;First,  copy the image file and create a new virtual machine from it. Next, start and log in the &quot;new&quot; machine.&lt;/p&gt;

&lt;p&gt;Now, remove &lt;code&gt;70-persistent-net.rules&lt;/code&gt;, otherwise the network will not work:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo rm /etc/udev/rules.d/70-persistent-net.rules
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This file will be re-generated after a reboot.&lt;/p&gt;

&lt;p&gt;Next, change the hostname in &lt;code&gt;/etc/hostname&lt;/code&gt; and /&lt;code&gt;etc/hosts&lt;/code&gt; according to your preference.&lt;/p&gt;

&lt;p&gt;Finally, reboot and enjoy the new machine.&lt;/p&gt;

&lt;p&gt;See also: &lt;a href=&quot;http://koo.fi/tech/2010/11/28/cloning-ubuntu-1004-server-kvm-guests-efficiently/&quot;&gt;Cloning Ubuntu 10.04 Server KVM guests efficiently&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
</feed>
